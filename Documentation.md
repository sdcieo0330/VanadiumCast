# Dokumentation VanadiumCast (Rohfassung, Anhang, Quellen etc. fehlen)

## Vorwort
Google Chromecast ist weit verbreitet, allerdings ist es kein Open-Source und man ist gezwungen ein Google Chromecast oder ein Android TV als Ziel und entweder Chrome oder ein Android-Gerät als Quelle zu benutzen. Außerdem gibt es keine Möglichkeit den Desktop zu übertragen, wodurch eine potenziell gute Lösung eine große Nutzergruppe nicht anspricht. In diese Lücke fügt sich nun VanadiumCast ein.

## Projektidee
Mit VanadiumCast kann man Videos und (in Zukunft) seinen Desktop an ein beliebiges Gerät übertragen, auf dem das Programm installiert ist. Es ist ähnlich einfach zu bedienen wie Chromecast, sodass es auch für technisch unbedarfte Personen nutzbar ist. Lediglich die Installation der Endgeräte ist deutlich schwieriger, da diese aber nur einmalig erfolgen muss, gibt es dort keine Probleme.

Zudem ist geplant, dass VanadiumCast auf allen Desktop- und Mobilgeräten installiert und benutzt werden kann, sodass auch Handy → Handy oder Desktop → Handy Übertragungen möglich sind. Als Zielgerät eignet sich aktuell nur Laptops / PCs / Mini-PCs / SBCs mit Intel-CPUs mit iGPUs ab der 3. Generation oder Nvidia-GPUs ab der GTX 8xx, als Quellgerät die gleichen Gerätetypen, jedoch werden hier Intel-CPUs ab der 4. Generation vorausgesetzt, da auf der Quelle mehr Leistung benötigt wird als auf dem Ziel. Es ist aber geplant beide Seiten zu optimieren und zu erweitern, sodass auch kleine SBCs wie ein Raspberry Pi oder Pine A64 als Ziel und/oder Quelle geeignet sind.

Damit ist es dann auch möglich, ganze Schulen mit günstigen SBCs auszustatten, um Schülerinnen und Schülern sowie Lehrkräften Bildschirmübertragungen zu ermöglichen, ohne den komplizierten Weg über Miracast zu gehen, der nur an Fernsehern und in Kombination mit Android oder Windows 10 möglich ist. Da die Software nur im LAN kommuniziert, ist auch der Datenschutz gewährleistet, bei Google Chromecast werden hingegen Daten in die Google Cloud gesendet. Zudem lässt sich bei VanadiumCast die Übertragungsqualität einstellen, sodass man nicht darauf angewiesen ist, dass die Software die richtige auswählt.

## Motivation
Weil ich persönlich keinen Google Chromecast kaufen wollte und man damit auch keine Videos von Linux aus streamen könnte, habe ich mir am Ende der Sommerferien 2020 überlegt, ob man nicht auch selbst eine Lösung dafür entwickeln könnte. Also habe ich mich im Internet über mögliche C++-Bibliotheken informiert und es wurde schnell klar, dass die sehr einfache Idee recht schwierig umzusetzen ist. Da ich zu diesem Zeitpunkt aber an keinen anderen Projekte gearbeitet habe, nahm ich die Herausforderung an. Das gesamte Projekt ist ein "learning-by-doing"-Projekt, das heißt, dass ich mich dann über Dinge informiere, wenn ich sie konkret benötige. Zum Beispiel habe ich mich zuerst mit FFmpeg bzw. den Libav-Bibliotheken auseinandergesetzt, um zu verstehen, wie man ein Video in C++ transkodieren kann.

## Eine kurze Einführung in AV-Verarbeitung
### Videocodecs
Videos werden nicht im Rohformat abgespeichert, da sie unkomprimiert sehr viel Platz verbrauchen. Für einen Spielfilm auf Bluray, d.h. 120 min. Full HD mit 1 Byte pro Farbe und 24 Bildern pro Sekunde, sind das bereits ``1920 * 1080 * 3B * 24 * 120 * 60s = 1,074,954,240,000 B ≈ 1,1 TB``. Diese Menge an Speicherplatz möchte niemand für einen Film auf seiner Festplatte bereitstellen. Daher wurde 1988 der Kompressionsstandard H.261 festgelegt, dessen Nachfolger zum Veröffentlichungszeitpunkt immer den aktuellen Stand der Technik darstellten, aktuell sind das H.264/AVC und H.265/HEVC, welche auch in VanadiumCast zum Einsatz kommen. In GPUs stecken seit ca. 10 Jahren Videoprozessoren, die die CPU beim En-/Dekodieren von Videos entlasten, sodass weniger Energie verbraucht wird. Erst dadurch wird es möglich, auf Handys, Tablets etc. Video abzuspielen, da die Akkulaufzeit sonst zu gering wäre.

### Audiocodecs
Bei Audiodaten ist das Problem recht ähnlich, und auch wenn man auf aktuellen SD-Karten mehrere Stunden unkomprimiertes Audio speichern kann, ist es meistens ausreichend und teilweise besser, Audio zu komprimieren, z.B. bei Streaming-Diensten wie Spotify, da mobile Daten meist teuer und limitiert sind. Ursprünglich gab es das Problem, dass man auf Walkmans nicht ausreichend Platz hatte, um mehrere Stunden Musik zu speichern, weswegen eine Arbeitsgruppe des Frauenhofer IIS in Zusammenarbeit mit einer anderen Universität, AT&T Bell Labs und Thomson die MP3-Kodierung entwickelte. Dabei wird Platz gespart, indem durch die Anwendung von Psychoakustik gezielt Teile der Daten weggelassen oder verkleinert werden, die der Mensch normalerweise nicht wahrnimmt. Dadurch wird bei einer Bitrate von 192 kBit/s eine Kompressionsrate von 85% gegenüber einer Audio-CD erzielt.
Aktuellere Codecs wie AAC und Opus unterscheiden sich von MP3 im Kompressionsalgorithmus und der Qualität bei bestimmten Bitraten, sodass sie unterschiedlich gut für das Streaming geeignet sind. In VanadiumCast wird aktuell AAC verwendet, da es die gleiche Qualität wie MP3 bei geringerer Bitrate gewährleistet.

### Containerformate
Ein Video- oder Audiocodec alleine reicht nicht aus, um eine Video mit Ton und eventuellen Untertiteln etc. abzuspeichern, daher gibt es Containerformate, durch die mehrere Video-/Audiospuren teilweise mit Untertiteln in einer Datei vereint werden. Die Auswahl des Containerformat nachezu keinen Unterschied bei der Dateigröße, sondern nur in den Möglichkeiten, welche Art von Daten enthalten sein können. Bekannte Beispiele sind das von Apple entwickelte und weit verbreitete MP4 oder das offene Matroska-Format, ersteres unterstützt nur Video- und Audiospuren, letzteres alle möglichen Spuren inklusive 3D-Inhalte und Menüs wie auf DVDs.

# Umsetzung
## Bibliotheken und Frameworks
